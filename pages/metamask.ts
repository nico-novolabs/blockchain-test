import {ethers} from "ethers";

export const makeTransactionWithMetamask = async (sender: string, receiver: string, amount: string) => {
    const transactionParameters = {
        to: receiver, // Required except during contract publications.
        from: sender, // must match user's active address.
        value: ethers.utils.parseEther(amount)._hex, // Only required to send ether to the recipient from the initiating external account.
        data: '0x7f7465737432000000000000000000000000000000000000000000000000000000600057', // Optional, but used for defining smart contract creation and interaction.
    };

    // txHash is a hex string
    // As with any RPC call, it may throw an error
    const txHash = await (window as any).ethereum.request({
        method: 'eth_sendTransaction',
        params: [transactionParameters],
    });

    console.log('tx', txHash);

    return txHash;
}

export const signSmartContractWithMetamask = async (receiver: string, sender: string, amount: string) => {
    const scToSign = "0x60806040526040518060400160405280600581526020017f2e6a736f6e00000000000000000000000000000000000000000000000000000081525060069080519060200190620000519291906200027f565b506000600960146101000a81548160ff0219169083151502179055503480156200007a57600080fd5b5060405162005382380380620053828339818101604052810190620000a091906200056c565b83620000b2816200019560201b60201c565b506000600360006101000a81548160ff021916908315150217905550620000ee620000e2620001b160201b60201c565b620001b960201b60201c565b8560079080519060200190620001069291906200027f565b5084600890805190602001906200011f9291906200027f565b508260059080519060200190620001389291906200027f565b508160048190555080600960006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000600a81905550505050505050620006e9565b8060029080519060200190620001ad9291906200027f565b5050565b600033905090565b6000600360019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600360016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b8280546200028d90620006b3565b90600052602060002090601f016020900481019282620002b15760008555620002fd565b82601f10620002cc57805160ff1916838001178555620002fd565b82800160010185558215620002fd579182015b82811115620002fc578251825591602001919060010190620002df565b5b5090506200030c919062000310565b5090565b5b808211156200032b57600081600090555060010162000311565b5090565b6000604051905090565b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b62000398826200034d565b810181811067ffffffffffffffff82111715620003ba57620003b96200035e565b5b80604052505050565b6000620003cf6200032f565b9050620003dd82826200038d565b919050565b600067ffffffffffffffff8211156200040057620003ff6200035e565b5b6200040b826200034d565b9050602081019050919050565b60005b83811015620004385780820151818401526020810190506200041b565b8381111562000448576000848401525b50505050565b6000620004656200045f84620003e2565b620003c3565b90508281526020810184848401111562000484576200048362000348565b5b6200049184828562000418565b509392505050565b600082601f830112620004b157620004b062000343565b5b8151620004c38482602086016200044e565b91505092915050565b6000819050919050565b620004e181620004cc565b8114620004ed57600080fd5b50565b6000815190506200050181620004d6565b92915050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000620005348262000507565b9050919050565b620005468162000527565b81146200055257600080fd5b50565b60008151905062000566816200053b565b92915050565b60008060008060008060c087890312156200058c576200058b62000339565b5b600087015167ffffffffffffffff811115620005ad57620005ac6200033e565b5b620005bb89828a0162000499565b965050602087015167ffffffffffffffff811115620005df57620005de6200033e565b5b620005ed89828a0162000499565b955050604087015167ffffffffffffffff8111156200061157620006106200033e565b5b6200061f89828a0162000499565b945050606087015167ffffffffffffffff8111156200064357620006426200033e565b5b6200065189828a0162000499565b93505060806200066489828a01620004f0565b92505060a06200067789828a0162000555565b9150509295509295509295565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680620006cc57607f821691505b60208210811415620006e357620006e262000684565b5b50919050565b614c8980620006f96000396000f3fe6080604052600436106101345760003560e01c8063715018a6116100ab578063a22cb4651161006f578063a22cb4651461043b578063e985e9c514610464578063f242432a146104a1578063f2fde38b146104ca578063f5357e9f146104f3578063f9d54cfc1461053057610134565b8063715018a61461037557806377fb1c6a1461038c5780638da5cb5b146103bc57806395d89b41146103e75780639b642de11461041257610134565b80632eb2c2d6116100fd5780632eb2c2d6146102465780633fcb02291461026f578063497e288f1461029f5780634e1273f4146102cf5780635c975abb1461030c5780636251971a1461033757610134565b8062fdd58e1461013957806301ffc9a71461017657806306fdde03146101b35780630e89341c146101de57806318160ddd1461021b575b600080fd5b34801561014557600080fd5b50610160600480360381019061015b9190612fe3565b61055b565b60405161016d9190613032565b60405180910390f35b34801561018257600080fd5b5061019d600480360381019061019891906130a5565b610624565b6040516101aa91906130ed565b60405180910390f35b3480156101bf57600080fd5b506101c8610706565b6040516101d591906131a1565b60405180910390f35b3480156101ea57600080fd5b50610205600480360381019061020091906131c3565b610798565b60405161021291906131a1565b60405180910390f35b34801561022757600080fd5b50610230610822565b60405161023d9190613032565b60405180910390f35b34801561025257600080fd5b5061026d600480360381019061026891906133ed565b61082c565b005b61028960048036038101906102849190613701565b6108cd565b60405161029691906130ed565b60405180910390f35b6102b960048036038101906102b491906137bc565b610d1b565b6040516102c691906130ed565b60405180910390f35b3480156102db57600080fd5b506102f660048036038101906102f1919061382b565b611002565b6040516103039190613961565b60405180910390f35b34801561031857600080fd5b5061032161111b565b60405161032e91906130ed565b60405180910390f35b34801561034357600080fd5b5061035e60048036038101906103599190613983565b611132565b60405161036c929190613abc565b60405180910390f35b34801561038157600080fd5b5061038a611553565b005b34801561039857600080fd5b506103a16115db565b6040516103b396959493929190613af3565b60405180910390f35b3480156103c857600080fd5b506103d161188c565b6040516103de9190613b78565b60405180910390f35b3480156103f357600080fd5b506103fc6118b6565b60405161040991906131a1565b60405180910390f35b34801561041e57600080fd5b5061043960048036038101906104349190613b93565b611948565b005b34801561044757600080fd5b50610462600480360381019061045d9190613c08565b611a68565b005b34801561047057600080fd5b5061048b60048036038101906104869190613c48565b611a7e565b60405161049891906130ed565b60405180910390f35b3480156104ad57600080fd5b506104c860048036038101906104c39190613c88565b611b12565b005b3480156104d657600080fd5b506104f160048036038101906104ec9190613983565b611bb3565b005b3480156104ff57600080fd5b5061051a60048036038101906105159190613983565b611cab565b6040516105279190613961565b60405180910390f35b34801561053c57600080fd5b50610545611ea2565b6040516105529190613b78565b60405180910390f35b60008073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614156105cc576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105c390613d91565b60405180910390fd5b60008083815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b60007fd9b67a26000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614806106ef57507f0e89341c000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b806106ff57506106fe82611ec8565b5b9050919050565b60606007805461071590613de0565b80601f016020809104026020016040519081016040528092919081815260200182805461074190613de0565b801561078e5780601f106107635761010080835404028352916020019161078e565b820191906000526020600020905b81548152906001019060200180831161077157829003601f168201915b5050505050905090565b60606004548211156107df576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107d690613e5e565b60405180910390fd5b6107e882611f32565b600c600084815260200190815260200160002060405160200161080c929190613f4e565b6040516020818303038152906040529050919050565b6000600454905090565b610834611fc6565b73ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff16148061087a575061087985610874611fc6565b611a7e565b5b6108b9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016108b090613fe4565b60405180910390fd5b6108c68585858585611fce565b5050505050565b60006108d7611fc6565b73ffffffffffffffffffffffffffffffffffffffff166108f561188c565b73ffffffffffffffffffffffffffffffffffffffff16148061096b5750600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16610953611fc6565b73ffffffffffffffffffffffffffffffffffffffff16145b6109aa576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109a190614050565b60405180910390fd5b6109b261111b565b156109f2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109e9906140bc565b60405180910390fd5b81518514610a35576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a2c9061414e565b60405180910390fd5b6000610a4c86600a546122e290919063ffffffff16565b9050600454811115610a93576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a8a90614206565b60405180910390fd5b6000600a5490506000805b8751811015610d0b576000888281518110610abc57610abb614226565b5b602002602001015190506000888381518110610adb57610ada614226565b5b6020026020010151905060008167ffffffffffffffff811115610b0157610b006131f5565b5b604051908082528060200260200182016040528015610b2f5781602001602082028036833780820191505090505b50905060008267ffffffffffffffff811115610b4e57610b4d6131f5565b5b604051908082528060200260200182016040528015610b7c5781602001602082028036833780820191505090505b50905060005b8b8681518110610b9557610b94614226565b5b6020026020010151811015610cd85787838281518110610bb857610bb7614226565b5b6020026020010181815250506001828281518110610bd957610bd8614226565b5b6020026020010181815250508a8781518110610bf857610bf7614226565b5b6020026020010151600c60008a81526020019081526020016000209080519060200190610c26929190612e98565b50600b60008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020889080600181540180825580915050600190039060005260206000200160009091909190915055610ca36001600a546122e290919063ffffffff16565b600a819055508680610cb490614284565b9750508780610cc290614284565b9850508080610cd090614284565b915050610b82565b50610cf4848383604051806020016040528060008152506122f8565b505050508080610d0390614284565b915050610a9e565b5060019350505050949350505050565b6000610d2561111b565b15610d65576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d5c906140bc565b60405180910390fd5b81518314610da8576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d9f9061414e565b60405180910390fd5b6000610dbf84600a546122e290919063ffffffff16565b9050600454811115610e06576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610dfd90614206565b60405180910390fd5b60008467ffffffffffffffff811115610e2257610e216131f5565b5b604051908082528060200260200182016040528015610e505781602001602082028036833780820191505090505b50905060008567ffffffffffffffff811115610e6f57610e6e6131f5565b5b604051908082528060200260200182016040528015610e9d5781602001602082028036833780820191505090505b509050600080600a5490505b84811015610fd75780848381518110610ec557610ec4614226565b5b6020026020010181815250506001838381518110610ee657610ee5614226565b5b602002602001018181525050868281518110610f0557610f04614226565b5b6020026020010151600c60008381526020019081526020016000209080519060200190610f33929190612e98565b50600b60008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819080600181540180825580915050600190039060005260206000200160009091909190915055610fb06001600a546122e290919063ffffffff16565b600a819055508180610fc190614284565b9250508080610fcf90614284565b915050610ea9565b50610ff3888484604051806020016040528060008152506122f8565b60019450505050509392505050565b60608151835114611048576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161103f9061433f565b60405180910390fd5b6000835167ffffffffffffffff811115611065576110646131f5565b5b6040519080825280602002602001820160405280156110935781602001602082028036833780820191505090505b50905060005b8451811015611110576110e08582815181106110b8576110b7614226565b5b60200260200101518583815181106110d3576110d2614226565b5b602002602001015161055b565b8282815181106110f3576110f2614226565b5b6020026020010181815250508061110990614284565b9050611099565b508091505092915050565b6000600360009054906101000a900460ff16905090565b60608061113d611fc6565b73ffffffffffffffffffffffffffffffffffffffff1661115b61188c565b73ffffffffffffffffffffffffffffffffffffffff1614806111d15750600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166111b9611fc6565b73ffffffffffffffffffffffffffffffffffffffff16145b611210576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161120790614050565b60405180910390fd5b6000600b60008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208054905011611295576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161128c906143ab565b60405180910390fd5b60006040518060200160405280600081525090506000600b60008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208054905067ffffffffffffffff811115611307576113066131f5565b5b60405190808252806020026020018201604052801561133a57816020015b60608152602001906001900390816113255790505b50905060005b600b60008773ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805490508110156114b557600c6000600b60008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002083815481106113df576113de614226565b5b90600052602060002001548152602001908152602001600020805461140390613de0565b80601f016020809104026020016040519081016040528092919081815260200182805461142f90613de0565b801561147c5780601f106114515761010080835404028352916020019161147c565b820191906000526020600020905b81548152906001019060200180831161145f57829003601f168201915b505050505092508282828151811061149757611496614226565b5b602002602001018190525080806114ad90614284565b915050611340565b50600b60008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020818180548060200260200160405190810160405280929190818152602001828054801561154157602002820191906000526020600020905b81548152602001906001019080831161152d575b50505050509150935093505050915091565b61155b611fc6565b73ffffffffffffffffffffffffffffffffffffffff1661157961188c565b73ffffffffffffffffffffffffffffffffffffffff16146115cf576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016115c690614050565b60405180910390fd5b6115d96000612516565b565b606080600060606000806115ed611fc6565b73ffffffffffffffffffffffffffffffffffffffff1661160b61188c565b73ffffffffffffffffffffffffffffffffffffffff1614806116815750600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16611669611fc6565b73ffffffffffffffffffffffffffffffffffffffff16145b6116c0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016116b790614050565b60405180910390fd5b600760086004546005600a546116d461111b565b8580546116e090613de0565b80601f016020809104026020016040519081016040528092919081815260200182805461170c90613de0565b80156117595780601f1061172e57610100808354040283529160200191611759565b820191906000526020600020905b81548152906001019060200180831161173c57829003601f168201915b5050505050955084805461176c90613de0565b80601f016020809104026020016040519081016040528092919081815260200182805461179890613de0565b80156117e55780601f106117ba576101008083540402835291602001916117e5565b820191906000526020600020905b8154815290600101906020018083116117c857829003601f168201915b505050505094508280546117f890613de0565b80601f016020809104026020016040519081016040528092919081815260200182805461182490613de0565b80156118715780601f1061184657610100808354040283529160200191611871565b820191906000526020600020905b81548152906001019060200180831161185457829003601f168201915b50505050509250955095509550955095509550909192939495565b6000600360019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6060600880546118c590613de0565b80601f01602080910402602001604051908101604052809291908181526020018280546118f190613de0565b801561193e5780601f106119135761010080835404028352916020019161193e565b820191906000526020600020905b81548152906001019060200180831161192157829003601f168201915b5050505050905090565b611950611fc6565b73ffffffffffffffffffffffffffffffffffffffff1661196e61188c565b73ffffffffffffffffffffffffffffffffffffffff1614806119e45750600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166119cc611fc6565b73ffffffffffffffffffffffffffffffffffffffff16145b611a23576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611a1a90614050565b60405180910390fd5b611a2c816125dc565b60007f6bb7ff708619ba0610cba295a58592e0451dee2622938c8755667688daf3529b82604051611a5d91906131a1565b60405180910390a250565b611a7a611a73611fc6565b83836125f6565b5050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b611b1a611fc6565b73ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff161480611b605750611b5f85611b5a611fc6565b611a7e565b5b611b9f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611b969061443d565b60405180910390fd5b611bac8585858585612763565b5050505050565b611bbb611fc6565b73ffffffffffffffffffffffffffffffffffffffff16611bd961188c565b73ffffffffffffffffffffffffffffffffffffffff1614611c2f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611c2690614050565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff161415611c9f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611c96906144cf565b60405180910390fd5b611ca881612516565b50565b6060611cb5611fc6565b73ffffffffffffffffffffffffffffffffffffffff16611cd361188c565b73ffffffffffffffffffffffffffffffffffffffff161480611d495750600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16611d31611fc6565b73ffffffffffffffffffffffffffffffffffffffff16145b611d88576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611d7f90614050565b60405180910390fd5b6000600b60008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000208054905011611e0d576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611e04906143ab565b60405180910390fd5b600b60008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020805480602002602001604051908101604052809291908181526020018280548015611e9657602002820191906000526020600020905b815481526020019060010190808311611e82575b50505050509050919050565b600960009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b606060028054611f4190613de0565b80601f0160208091040260200160405190810160405280929190818152602001828054611f6d90613de0565b8015611fba5780601f10611f8f57610100808354040283529160200191611fba565b820191906000526020600020905b815481529060010190602001808311611f9d57829003601f168201915b50505050509050919050565b600033905090565b8151835114612012576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161200990614561565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161415612082576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612079906145f3565b60405180910390fd5b600061208c611fc6565b905061209c8187878787876129e5565b60005b845181101561224d5760008582815181106120bd576120bc614226565b5b6020026020010151905060008583815181106120dc576120db614226565b5b60200260200101519050600080600084815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490508181101561217d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161217490614685565b60405180910390fd5b81810360008085815260200190815260200160002060008c73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508160008085815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825461223291906146a5565b925050819055505050508061224690614284565b905061209f565b508473ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb87876040516122c49291906146fb565b60405180910390a46122da818787878787612a43565b505050505050565b600081836122f091906146a5565b905092915050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff161415612368576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161235f906147a4565b60405180910390fd5b81518351146123ac576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016123a390614561565b60405180910390fd5b60006123b6611fc6565b90506123c7816000878787876129e5565b60005b8451811015612480578381815181106123e6576123e5614226565b5b602002602001015160008087848151811061240457612403614226565b5b6020026020010151815260200190815260200160002060008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825461246691906146a5565b92505081905550808061247890614284565b9150506123ca565b508473ffffffffffffffffffffffffffffffffffffffff16600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb87876040516124f89291906146fb565b60405180910390a461250f81600087878787612a43565b5050505050565b6000600360019054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600360016101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b80600290805190602001906125f2929190612e98565b5050565b8173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff161415612665576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161265c90614836565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c318360405161275691906130ed565b60405180910390a3505050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1614156127d3576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016127ca906145f3565b60405180910390fd5b60006127dd611fc6565b90506127fd8187876127ee88612c1b565b6127f788612c1b565b876129e5565b600080600086815260200190815260200160002060008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905083811015612894576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161288b90614685565b60405180910390fd5b83810360008087815260200190815260200160002060008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508360008087815260200190815260200160002060008873ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825461294991906146a5565b925050819055508573ffffffffffffffffffffffffffffffffffffffff168773ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f6288886040516129c6929190614856565b60405180910390a46129dc828888888888612c95565b50505050505050565b6129f3868686868686612e6d565b6129fb61111b565b15612a3b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612a32906148f1565b60405180910390fd5b505050505050565b612a628473ffffffffffffffffffffffffffffffffffffffff16612e75565b15612c13578373ffffffffffffffffffffffffffffffffffffffff1663bc197c8187878686866040518663ffffffff1660e01b8152600401612aa8959493929190614966565b6020604051808303816000875af1925050508015612ae457506040513d601f19601f82011682018060405250810190612ae191906149e3565b60015b612b8a57612af0614a1d565b806308c379a01415612b4d5750612b05614a3f565b80612b105750612b4f565b806040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612b4491906131a1565b60405180910390fd5b505b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612b8190614b47565b60405180910390fd5b63bc197c8160e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614612c11576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612c0890614bd9565b60405180910390fd5b505b505050505050565b60606000600167ffffffffffffffff811115612c3a57612c396131f5565b5b604051908082528060200260200182016040528015612c685781602001602082028036833780820191505090505b5090508281600081518110612c8057612c7f614226565b5b60200260200101818152505080915050919050565b612cb48473ffffffffffffffffffffffffffffffffffffffff16612e75565b15612e65578373ffffffffffffffffffffffffffffffffffffffff1663f23a6e6187878686866040518663ffffffff1660e01b8152600401612cfa959493929190614bf9565b6020604051808303816000875af1925050508015612d3657506040513d601f19601f82011682018060405250810190612d3391906149e3565b60015b612ddc57612d42614a1d565b806308c379a01415612d9f5750612d57614a3f565b80612d625750612da1565b806040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612d9691906131a1565b60405180910390fd5b505b6040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612dd390614b47565b60405180910390fd5b63f23a6e6160e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614612e63576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401612e5a90614bd9565b60405180910390fd5b505b505050505050565b505050505050565b6000808273ffffffffffffffffffffffffffffffffffffffff163b119050919050565b828054612ea490613de0565b90600052602060002090601f016020900481019282612ec65760008555612f0d565b82601f10612edf57805160ff1916838001178555612f0d565b82800160010185558215612f0d579182015b82811115612f0c578251825591602001919060010190612ef1565b5b509050612f1a9190612f1e565b5090565b5b80821115612f37576000816000905550600101612f1f565b5090565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000612f7a82612f4f565b9050919050565b612f8a81612f6f565b8114612f9557600080fd5b50565b600081359050612fa781612f81565b92915050565b6000819050919050565b612fc081612fad565b8114612fcb57600080fd5b50565b600081359050612fdd81612fb7565b92915050565b60008060408385031215612ffa57612ff9612f45565b5b600061300885828601612f98565b925050602061301985828601612fce565b9150509250929050565b61302c81612fad565b82525050565b60006020820190506130476000830184613023565b92915050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b6130828161304d565b811461308d57600080fd5b50565b60008135905061309f81613079565b92915050565b6000602082840312156130bb576130ba612f45565b5b60006130c984828501613090565b91505092915050565b60008115159050919050565b6130e7816130d2565b82525050565b600060208201905061310260008301846130de565b92915050565b600081519050919050565b600082825260208201905092915050565b60005b83811015613142578082015181840152602081019050613127565b83811115613151576000848401525b50505050565b6000601f19601f8301169050919050565b600061317382613108565b61317d8185613113565b935061318d818560208601613124565b61319681613157565b840191505092915050565b600060208201905081810360008301526131bb8184613168565b905092915050565b6000602082840312156131d9576131d8612f45565b5b60006131e784828501612fce565b91505092915050565b600080fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b61322d82613157565b810181811067ffffffffffffffff8211171561324c5761324b6131f5565b5b80604052505050565b600061325f612f3b565b905061326b8282613224565b919050565b600067ffffffffffffffff82111561328b5761328a6131f5565b5b602082029050602081019050919050565b600080fd5b60006132b46132af84613270565b613255565b905080838252602082019050602084028301858111156132d7576132d661329c565b5b835b8181101561330057806132ec8882612fce565b8452602084019350506020810190506132d9565b5050509392505050565b600082601f83011261331f5761331e6131f0565b5b813561332f8482602086016132a1565b91505092915050565b600080fd5b600067ffffffffffffffff821115613358576133576131f5565b5b61336182613157565b9050602081019050919050565b82818337600083830152505050565b600061339061338b8461333d565b613255565b9050828152602081018484840111156133ac576133ab613338565b5b6133b784828561336e565b509392505050565b600082601f8301126133d4576133d36131f0565b5b81356133e484826020860161337d565b91505092915050565b600080600080600060a0868803121561340957613408612f45565b5b600061341788828901612f98565b955050602061342888828901612f98565b945050604086013567ffffffffffffffff81111561344957613448612f4a565b5b6134558882890161330a565b935050606086013567ffffffffffffffff81111561347657613475612f4a565b5b6134828882890161330a565b925050608086013567ffffffffffffffff8111156134a3576134a2612f4a565b5b6134af888289016133bf565b9150509295509295909350565b600067ffffffffffffffff8211156134d7576134d66131f5565b5b602082029050602081019050919050565b60006134fb6134f6846134bc565b613255565b9050808382526020820190506020840283018581111561351e5761351d61329c565b5b835b8181101561354757806135338882612f98565b845260208401935050602081019050613520565b5050509392505050565b600082601f830112613566576135656131f0565b5b81356135768482602086016134e8565b91505092915050565b600067ffffffffffffffff82111561359a576135996131f5565b5b602082029050602081019050919050565b600067ffffffffffffffff8211156135c6576135c56131f5565b5b6135cf82613157565b9050602081019050919050565b60006135ef6135ea846135ab565b613255565b90508281526020810184848401111561360b5761360a613338565b5b61361684828561336e565b509392505050565b600082601f830112613633576136326131f0565b5b81356136438482602086016135dc565b91505092915050565b600061365f61365a8461357f565b613255565b905080838252602082019050602084028301858111156136825761368161329c565b5b835b818110156136c957803567ffffffffffffffff8111156136a7576136a66131f0565b5b8086016136b4898261361e565b85526020850194505050602081019050613684565b5050509392505050565b600082601f8301126136e8576136e76131f0565b5b81356136f884826020860161364c565b91505092915050565b6000806000806080858703121561371b5761371a612f45565b5b600061372987828801612fce565b945050602085013567ffffffffffffffff81111561374a57613749612f4a565b5b61375687828801613551565b935050604085013567ffffffffffffffff81111561377757613776612f4a565b5b6137838782880161330a565b925050606085013567ffffffffffffffff8111156137a4576137a3612f4a565b5b6137b0878288016136d3565b91505092959194509250565b6000806000606084860312156137d5576137d4612f45565b5b60006137e386828701612f98565b93505060206137f486828701612fce565b925050604084013567ffffffffffffffff81111561381557613814612f4a565b5b613821868287016136d3565b9150509250925092565b6000806040838503121561384257613841612f45565b5b600083013567ffffffffffffffff8111156138605761385f612f4a565b5b61386c85828601613551565b925050602083013567ffffffffffffffff81111561388d5761388c612f4a565b5b6138998582860161330a565b9150509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6138d881612fad565b82525050565b60006138ea83836138cf565b60208301905092915050565b6000602082019050919050565b600061390e826138a3565b61391881856138ae565b9350613923836138bf565b8060005b8381101561395457815161393b88826138de565b9750613946836138f6565b925050600181019050613927565b5085935050505092915050565b6000602082019050818103600083015261397b8184613903565b905092915050565b60006020828403121561399957613998612f45565b5b60006139a784828501612f98565b91505092915050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b600082825260208201905092915050565b60006139f882613108565b613a0281856139dc565b9350613a12818560208601613124565b613a1b81613157565b840191505092915050565b6000613a3283836139ed565b905092915050565b6000602082019050919050565b6000613a52826139b0565b613a5c81856139bb565b935083602082028501613a6e856139cc565b8060005b85811015613aaa5784840389528151613a8b8582613a26565b9450613a9683613a3a565b925060208a01995050600181019050613a72565b50829750879550505050505092915050565b60006040820190508181036000830152613ad68185613903565b90508181036020830152613aea8184613a47565b90509392505050565b600060c0820190508181036000830152613b0d8189613168565b90508181036020830152613b218188613168565b9050613b306040830187613023565b8181036060830152613b428186613168565b9050613b516080830185613023565b613b5e60a08301846130de565b979650505050505050565b613b7281612f6f565b82525050565b6000602082019050613b8d6000830184613b69565b92915050565b600060208284031215613ba957613ba8612f45565b5b600082013567ffffffffffffffff811115613bc757613bc6612f4a565b5b613bd38482850161361e565b91505092915050565b613be5816130d2565b8114613bf057600080fd5b50565b600081359050613c0281613bdc565b92915050565b60008060408385031215613c1f57613c1e612f45565b5b6000613c2d85828601612f98565b9250506020613c3e85828601613bf3565b9150509250929050565b60008060408385031215613c5f57613c5e612f45565b5b6000613c6d85828601612f98565b9250506020613c7e85828601612f98565b9150509250929050565b600080600080600060a08688031215613ca457613ca3612f45565b5b6000613cb288828901612f98565b9550506020613cc388828901612f98565b9450506040613cd488828901612fce565b9350506060613ce588828901612fce565b925050608086013567ffffffffffffffff811115613d0657613d05612f4a565b5b613d12888289016133bf565b9150509295509295909350565b7f455243313135353a2062616c616e636520717565727920666f7220746865207a60008201527f65726f2061646472657373000000000000000000000000000000000000000000602082015250565b6000613d7b602b83613113565b9150613d8682613d1f565b604082019050919050565b60006020820190508181036000830152613daa81613d6e565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680613df857607f821691505b60208210811415613e0c57613e0b613db1565b5b50919050565b7f54686973206e6674206973206e6f7420617661696c61626c6500000000000000600082015250565b6000613e48601983613113565b9150613e5382613e12565b602082019050919050565b60006020820190508181036000830152613e7781613e3b565b9050919050565b600081905092915050565b6000613e9482613108565b613e9e8185613e7e565b9350613eae818560208601613124565b80840191505092915050565b60008190508160005260206000209050919050565b60008154613edc81613de0565b613ee68186613e7e565b94506001821660008114613f015760018114613f1257613f45565b60ff19831686528186019350613f45565b613f1b85613eba565b60005b83811015613f3d57815481890152600182019150602081019050613f1e565b838801955050505b50505092915050565b6000613f5a8285613e89565b9150613f668284613ecf565b91508190509392505050565b7f455243313135353a207472616e736665722063616c6c6572206973206e6f742060008201527f6f776e6572206e6f7220617070726f7665640000000000000000000000000000602082015250565b6000613fce603283613113565b9150613fd982613f72565b604082019050919050565b60006020820190508181036000830152613ffd81613fc1565b9050919050565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572600082015250565b600061403a602083613113565b915061404582614004565b602082019050919050565b600060208201905081810360008301526140698161402d565b9050919050565b7f5061757361626c653a2070617573656400000000000000000000000000000000600082015250565b60006140a6601083613113565b91506140b182614070565b602082019050919050565b600060208201905081810360008301526140d581614099565b9050919050565b7f4c697374206f662075726973206d75737420626520657175616c20746f20616d60008201527f6f756e74206e6674732072657175657374656400000000000000000000000000602082015250565b6000614138603383613113565b9150614143826140dc565b604082019050919050565b600060208201905081810360008301526141678161412b565b9050919050565b7f507572636861736520776f756c6420657863656564206d617820737570706c7960008201527f206f66206e6674732c20796f752063616e206e6f74207265717565737420746860208201527f6973206e756d626572206f66206e667473000000000000000000000000000000604082015250565b60006141f0605183613113565b91506141fb8261416e565b606082019050919050565b6000602082019050818103600083015261421f816141e3565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b600061428f82612fad565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8214156142c2576142c1614255565b5b600182019050919050565b7f455243313135353a206163636f756e747320616e6420696473206c656e67746860008201527f206d69736d617463680000000000000000000000000000000000000000000000602082015250565b6000614329602983613113565b9150614334826142cd565b604082019050919050565b600060208201905081810360008301526143588161431c565b9050919050565b7f54686973207573657220646f6e742068617665206e6674730000000000000000600082015250565b6000614395601883613113565b91506143a08261435f565b602082019050919050565b600060208201905081810360008301526143c481614388565b9050919050565b7f455243313135353a2063616c6c6572206973206e6f74206f776e6572206e6f7260008201527f20617070726f7665640000000000000000000000000000000000000000000000602082015250565b6000614427602983613113565b9150614432826143cb565b604082019050919050565b600060208201905081810360008301526144568161441a565b9050919050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160008201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b60006144b9602683613113565b91506144c48261445d565b604082019050919050565b600060208201905081810360008301526144e8816144ac565b9050919050565b7f455243313135353a2069647320616e6420616d6f756e7473206c656e6774682060008201527f6d69736d61746368000000000000000000000000000000000000000000000000602082015250565b600061454b602883613113565b9150614556826144ef565b604082019050919050565b6000602082019050818103600083015261457a8161453e565b9050919050565b7f455243313135353a207472616e7366657220746f20746865207a65726f20616460008201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b60006145dd602583613113565b91506145e882614581565b604082019050919050565b6000602082019050818103600083015261460c816145d0565b9050919050565b7f455243313135353a20696e73756666696369656e742062616c616e636520666f60008201527f72207472616e7366657200000000000000000000000000000000000000000000602082015250565b600061466f602a83613113565b915061467a82614613565b604082019050919050565b6000602082019050818103600083015261469e81614662565b9050919050565b60006146b082612fad565b91506146bb83612fad565b9250827fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff038211156146f0576146ef614255565b5b828201905092915050565b600060408201905081810360008301526147158185613903565b905081810360208301526147298184613903565b90509392505050565b7f455243313135353a206d696e7420746f20746865207a65726f2061646472657360008201527f7300000000000000000000000000000000000000000000000000000000000000602082015250565b600061478e602183613113565b915061479982614732565b604082019050919050565b600060208201905081810360008301526147bd81614781565b9050919050565b7f455243313135353a2073657474696e6720617070726f76616c2073746174757360008201527f20666f722073656c660000000000000000000000000000000000000000000000602082015250565b6000614820602983613113565b915061482b826147c4565b604082019050919050565b6000602082019050818103600083015261484f81614813565b9050919050565b600060408201905061486b6000830185613023565b6148786020830184613023565b9392505050565b7f455243313135355061757361626c653a20746f6b656e207472616e736665722060008201527f7768696c65207061757365640000000000000000000000000000000000000000602082015250565b60006148db602c83613113565b91506148e68261487f565b604082019050919050565b6000602082019050818103600083015261490a816148ce565b9050919050565b600081519050919050565b600082825260208201905092915050565b600061493882614911565b614942818561491c565b9350614952818560208601613124565b61495b81613157565b840191505092915050565b600060a08201905061497b6000830188613b69565b6149886020830187613b69565b818103604083015261499a8186613903565b905081810360608301526149ae8185613903565b905081810360808301526149c2818461492d565b90509695505050505050565b6000815190506149dd81613079565b92915050565b6000602082840312156149f9576149f8612f45565b5b6000614a07848285016149ce565b91505092915050565b60008160e01c9050919050565b600060033d1115614a3c5760046000803e614a39600051614a10565b90505b90565b600060443d1015614a4f57614ad2565b614a57612f3b565b60043d036004823e80513d602482011167ffffffffffffffff82111715614a7f575050614ad2565b808201805167ffffffffffffffff811115614a9d5750505050614ad2565b80602083010160043d038501811115614aba575050505050614ad2565b614ac982602001850186613224565b82955050505050505b90565b7f455243313135353a207472616e7366657220746f206e6f6e204552433131353560008201527f526563656976657220696d706c656d656e746572000000000000000000000000602082015250565b6000614b31603483613113565b9150614b3c82614ad5565b604082019050919050565b60006020820190508181036000830152614b6081614b24565b9050919050565b7f455243313135353a204552433131353552656365697665722072656a6563746560008201527f6420746f6b656e73000000000000000000000000000000000000000000000000602082015250565b6000614bc3602883613113565b9150614bce82614b67565b604082019050919050565b60006020820190508181036000830152614bf281614bb6565b9050919050565b600060a082019050614c0e6000830188613b69565b614c1b6020830187613b69565b614c286040830186613023565b614c356060830185613023565b8181036080830152614c47818461492d565b9050969550505050505056fea26469706673582212207a2d2be602a5ed0cc1808102ce43fa9d10e3ede499bcfe3122a8b5c83e780dd864736f6c634300080b003300000000000000000000000000000000000000000000000000000000000000c00000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000014000000000000000000000000000000000000000000000000000000000000001a00000000000000000000000000000000000000000000000000000000000000014000000000000000000000000b95e10c67f584703b1031135c584f428e210b61900000000000000000000000000000000000000000000000000000000000000134e465420436f6c6c656374696f6e20546573740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000064e46544553540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000002268747470733a2f2f676174657761792e70696e6174612e636c6f75642f697066732f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000183632663533633139386461656562363936353835343430310000000000000000"

    const transactionParameters = {
        to: receiver, // Required except during contract publications.
        from: sender, // must match user's active address.
        value: ethers.utils.parseEther(amount)._hex, // Only required to send ether to the recipient from the initiating external account.
        data: '0x7f7465737432000000000000000000000000000000000000000000000000000000600057', // Optional, but used for defining smart contract creation and interaction.
    };

    // txHash is a hex string
    // As with any RPC call, it may throw an error
    const txHash = await (window as any).ethereum.request({
        method: 'eth_sendTransaction',
        params: [transactionParameters],
    });

    return txHash
}